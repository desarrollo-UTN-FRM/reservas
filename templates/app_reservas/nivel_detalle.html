{% extends 'app_reservas/base.html' %}
{% load static %}

{% block static_css %}
    <!--Fullcalendar-Scheduler-->
    <link rel='stylesheet' href='{% static 'fullcalendar/dist/fullcalendar.css' %}' />
    <link rel='stylesheet' href='{% static 'fullcalendar-scheduler/dist/scheduler.css' %}' />
    <script src='{% static 'moment/moment.js' %}'></script>
    <script src='{% static 'jquery/dist/jquery.js' %}'></script>
    <script src='{% static 'fullcalendar/dist/fullcalendar.js' %}'></script>
    <script src='{% static 'fullcalendar/dist/lang/es.js' %}'></script>
    <script src='{% static 'fullcalendar-scheduler/dist/scheduler.js' %}'></script>
{% endblock %}

{% block title %}
    {{ nivel }}
{% endblock %}

{% block contenido %}

<h1 style="text-align: center;">{{ nivel.get_nombre_corto }}</h1>
<h3 style="text-align: center;">{{ nivel.cuerpo.get_nombre_corto }}</h3>

<br />
<br />

<div id="calendar"></div>

<script>
    var current_date = new Date();
    var last_hour = (current_date.getHours() - 1) + ":00:00";

    $('#calendar').fullCalendar({
        defaultView: 'timelineDay',
        schedulerLicenseKey: 'GPL-My-Project-Is-Open-Source',
        lang: 'es',
        resources: [
            {% for aula in nivel.get_aulas %}
                {
                    id: '{{ aula.id }}',
                    title: '{{ aula.get_nombre_corto }}',
                },
            {% endfor %}
        ],
        eventSources: [
            {% for aula in nivel.get_aulas %}
                '/media/app_reservas/eventos_aulas/{{ aula.id }}.json',
            {% endfor %}
        ],
        minTime: last_hour,
    });
</script>
{% endblock %}
